(()=>{var e={};e.id=406,e.ids=[406],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},1447:(e,a,t)=>{"use strict";t.r(a),t.d(a,{patchFetch:()=>f,routeModule:()=>E,serverHooks:()=>g,workAsyncStorage:()=>_,workUnitAsyncStorage:()=>q});var o={};t.r(o),t.d(o,{GET:()=>p});var s=t(5367),r=t(9088),n=t(3807),d=t(4070),i=t(5697);async function c(){try{let e=await (0,i.eW)("SELECT 'Conex\xe3o bem-sucedida' as resultado");return{sucesso:!0,mensagem:"Conex\xe3o com o banco de dados estabelecida com sucesso",resultado:e.results[0]}}catch(e){return{sucesso:!1,mensagem:"Falha ao conectar com o banco de dados",erro:e.message}}}async function u(){try{let e={data:new Date().toISOString().split("T")[0],quantidade_aves:128,ovos_coletados:100,quebrados:2,consumo_interno:3,jumbo:15,extra:40,grande:30,medio:10},a=await (0,i.eW)("SELECT classificacao, quantidade FROM estoque WHERE data = (SELECT MAX(data) FROM estoque)"),t=`
      INSERT INTO postura (
        data, quantidade_aves, ovos_coletados, quebrados, 
        consumo_interno, observacoes, created_by
      ) VALUES (?, ?, ?, ?, ?, 'Teste de integra\xe7\xe3o', 1)
    `,o=(await (0,i.eW)(t,[e.data,e.quantidade_aves,e.ovos_coletados,e.quebrados,e.consumo_interno])).meta.last_row_id,s=`
      INSERT INTO classificacao (
        postura_id, jumbo, extra, grande, medio
      ) VALUES (?, ?, ?, ?, ?)
    `;await (0,i.eW)(s,[o,e.jumbo,e.extra,e.grande,e.medio]);let r=async(e,a)=>{let t=`
        UPDATE estoque 
        SET quantidade = quantidade + ?, updated_at = CURRENT_TIMESTAMP
        WHERE classificacao = ? AND data = (SELECT MAX(data) FROM estoque)
      `;await (0,i.eW)(t,[a,e])};await r("jumbo",e.jumbo),await r("extra",e.extra),await r("grande",e.grande),await r("medio",e.medio);let n=await (0,i.eW)("SELECT classificacao, quantidade FROM estoque WHERE data = (SELECT MAX(data) FROM estoque)");for(let e of(await (0,i.eW)("DELETE FROM classificacao WHERE postura_id = ?",[o]),await (0,i.eW)("DELETE FROM postura WHERE id = ?",[o]),a.results))await (0,i.eW)("UPDATE estoque SET quantidade = ? WHERE classificacao = ? AND data = (SELECT MAX(data) FROM estoque)",[e.quantidade,e.classificacao]);return{sucesso:!0,mensagem:"Teste de integra\xe7\xe3o entre postura e estoque conclu\xeddo com sucesso",estoqueAntes:a.results,estoqueDepois:n.results}}catch(e){return{sucesso:!1,mensagem:"Falha no teste de integra\xe7\xe3o entre postura e estoque",erro:e.message}}}async function l(){try{let e=new Date().toISOString().split("T")[0],a=await (0,i.eW)("SELECT classificacao, quantidade FROM estoque WHERE data = (SELECT MAX(data) FROM estoque)"),t=`
      INSERT INTO encomendas (
        cliente_id, data_pedido, data_entrega, status, 
        valor_total, forma_pagamento, observacoes, created_by
      ) VALUES (?, ?, ?, 'pendente', 50.00, 'Teste', 'Teste de integra\xe7\xe3o', 1)
    `,o=(await (0,i.eW)(t,[1,e,e])).meta.last_row_id,s=`
      INSERT INTO itens_encomenda (
        encomenda_id, classificacao, quantidade, valor_unitario, valor_total
      ) VALUES (?, 'extra', 10, 5.00, 50.00)
    `;await (0,i.eW)(s,[o]),await (0,i.eW)("UPDATE encomendas SET status = 'entregue' WHERE id = ?",[o]),await (0,i.eW)("UPDATE estoque SET quantidade = quantidade - 10 WHERE classificacao = 'extra' AND data = (SELECT MAX(data) FROM estoque)");let r=await (0,i.eW)("SELECT classificacao, quantidade FROM estoque WHERE data = (SELECT MAX(data) FROM estoque)");for(let e of(await (0,i.eW)("DELETE FROM itens_encomenda WHERE encomenda_id = ?",[o]),await (0,i.eW)("DELETE FROM encomendas WHERE id = ?",[o]),a.results))await (0,i.eW)("UPDATE estoque SET quantidade = ? WHERE classificacao = ? AND data = (SELECT MAX(data) FROM estoque)",[e.quantidade,e.classificacao]);return{sucesso:!0,mensagem:"Teste de integra\xe7\xe3o entre encomendas e estoque conclu\xeddo com sucesso",estoqueAntes:a.results,estoqueDepois:r.results}}catch(e){return{sucesso:!1,mensagem:"Falha no teste de integra\xe7\xe3o entre encomendas e estoque",erro:e.message}}}async function m(){let e={conexaoBancoDados:await c(),integracaoPosturaEstoque:await u(),integracaoEncomendasEstoque:await l()},a=Object.values(e).every(e=>e.sucesso);return{sucesso:a,mensagem:a?"Todos os testes foram conclu\xeddos com sucesso":"Alguns testes falharam",resultados:e}}async function p(e){try{let a;let t=e.nextUrl.searchParams.get("teste");return a="conexao"===t?await c():"postura"===t?await u():"encomendas"===t?await l():await m(),d.NextResponse.json({success:!0,data:a})}catch(e){return console.error("Erro ao executar testes:",e),d.NextResponse.json({success:!1,error:"Erro ao executar testes"},{status:500})}}let E=new s.AppRouteRouteModule({definition:{kind:r.RouteKind.APP_ROUTE,page:"/api/testes/route",pathname:"/api/testes",filename:"route",bundlePath:"app/api/testes/route"},resolvedPagePath:"/home/ubuntu/granja_app/granja_app/src/app/api/testes/route.ts",nextConfigOutput:"",userland:o}),{workAsyncStorage:_,workUnitAsyncStorage:q,serverHooks:g}=E;function f(){return(0,n.patchFetch)({workAsyncStorage:_,workUnitAsyncStorage:q})}},5276:()=>{},2124:()=>{},5697:(e,a,t)=>{"use strict";async function o(e=5){return[{id:1,data:"2025-04-19",quantidade_aves:128,ovos_coletados:95,quebrados:1,consumo_interno:0,jumbo:15,extra:40,grande:30,medio:10},{id:2,data:"2025-04-18",quantidade_aves:128,ovos_coletados:94,quebrados:0,consumo_interno:0,jumbo:14,extra:42,grande:28,medio:10},{id:3,data:"2025-04-17",quantidade_aves:128,ovos_coletados:87,quebrados:2,consumo_interno:0,jumbo:12,extra:38,grande:27,medio:10},{id:4,data:"2025-04-16",quantidade_aves:128,ovos_coletados:83,quebrados:1,consumo_interno:0,jumbo:10,extra:36,grande:28,medio:9},{id:5,data:"2025-04-15",quantidade_aves:128,ovos_coletados:83,quebrados:0,consumo_interno:0,jumbo:11,extra:35,grande:29,medio:8}].slice(0,e)}async function s(e=5){return[{id:1,data_pedido:"2025-04-21",data_entrega:"2025-04-25",status:"pendente",valor_total:30,cliente_nome:"Maria Silva",quantidade_total:30},{id:2,data_pedido:"2025-04-21",data_entrega:"2025-04-28",status:"confirmado",valor_total:108,cliente_nome:"Restaurante Sabor",quantidade_total:90},{id:3,data_pedido:"2025-04-20",data_entrega:"2025-04-22",status:"entregue",valor_total:72,cliente_nome:"Jo\xe3o Alves",quantidade_total:60},{id:4,data_pedido:"2025-04-19",data_entrega:"2025-04-30",status:"pendente",valor_total:144,cliente_nome:"Mercado Local",quantidade_total:120},{id:5,data_pedido:"2025-04-18",data_entrega:"2025-04-21",status:"entregue",valor_total:24,cliente_nome:"Ana Souza",quantidade_total:24}].slice(0,e)}async function r(){return[{classificacao:"jumbo",quantidade:15},{classificacao:"extra",quantidade:63},{classificacao:"grande",quantidade:45},{classificacao:"medio",quantidade:25}]}async function n(e=100){return[{id:1,nome:"Maria Silva",telefone:"(11) 98765-4321",email:"maria@email.com",tipo:"recorrente",desde:"2023-01-10",ultima_compra:"2025-04-21"},{id:2,nome:"Restaurante Sabor",telefone:"(11) 3456-7890",email:"contato@sabor.com.br",tipo:"comercial",desde:"2023-03-15",ultima_compra:"2025-04-21"},{id:3,nome:"Jo\xe3o Alves",telefone:"(11) 91234-5678",email:"joao@email.com",tipo:"recorrente",desde:"2023-05-05",ultima_compra:"2025-04-20"},{id:4,nome:"Mercado Local",telefone:"(11) 2345-6789",email:"compras@mercadolocal.com.br",tipo:"comercial",desde:"2023-06-20",ultima_compra:"2025-04-19"},{id:5,nome:"Ana Souza",telefone:"(11) 98765-1234",email:"ana@email.com",tipo:"eventual",desde:"2023-08-10",ultima_compra:"2025-04-18"}].slice(0,e)}async function d(e=10){return[{id:1,data:"2025-04-19",tipo:"entrada",origem:"producao",classificacao:"jumbo",quantidade:15,responsavel:"Administrador"},{id:2,data:"2025-04-19",tipo:"entrada",origem:"producao",classificacao:"extra",quantidade:40,responsavel:"Administrador"},{id:3,data:"2025-04-19",tipo:"entrada",origem:"producao",classificacao:"grande",quantidade:30,responsavel:"Administrador"},{id:4,data:"2025-04-19",tipo:"entrada",origem:"producao",classificacao:"medio",quantidade:10,responsavel:"Administrador"},{id:5,data:"2025-04-19",tipo:"saida",origem:"quebra",classificacao:"extra",quantidade:1,responsavel:"Administrador"},{id:6,data:"2025-04-18",tipo:"saida",origem:"venda",classificacao:"extra",quantidade:30,responsavel:"Administrador"},{id:7,data:"2025-04-18",tipo:"saida",origem:"venda",classificacao:"grande",quantidade:24,responsavel:"Administrador"}].slice(0,e)}async function i(e,a){return{total_ovos:2648,taxa_postura_media:66.7,total_quebrados:12,total_consumo:8}}async function c(e,a){return{total_jumbo:380,total_extra:1120,total_grande:850,total_medio:298}}async function u(e,a,t,o,s,r,n,d,i,c="",l=1){return{success:!0,posturaId:Math.floor(1e3*Math.random())+6}}async function l(e,a,t,o="Dinheiro",s="",r=1){return{success:!0,encomendaId:Math.floor(1e3*Math.random())+6}}async function m(e,a=1){return{success:!0}}async function p(e,a=[]){return console.log("Simula\xe7\xe3o de query:",e,a),{results:[]}}async function E(e,a=[]){return console.log("Simula\xe7\xe3o de run:",e,a),{meta:{last_row_id:Math.floor(1e3*Math.random())+1}}}t.d(a,{G:()=>u,GR:()=>c,Vr:()=>d,Wl:()=>i,ZG:()=>s,eW:()=>p,i4:()=>l,ig:()=>r,lk:()=>E,xq:()=>m,ys:()=>n,zH:()=>o})}};var a=require("../../../webpack-runtime.js");a.C(e);var t=e=>a(a.s=e),o=a.X(0,[803,654],()=>t(1447));module.exports=o})();